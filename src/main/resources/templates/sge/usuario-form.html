<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${usuario.id} != null ? 'Editar usuario' : 'Nuevo usuario'"></title>
</head>
<body>

<h1 th:text="${usuario.id} != null ? 'Editar usuario' : 'Nuevo usuario'"></h1>

<form th:action="@{/usuarios/guardar}" method="post">

    <input type="hidden" name="id" th:value="${usuario.id}" />

    <label>Nombre:</label><br/>
    <input type="text" name="nombre" th:value="${usuario.nombre}" required/><br/><br/>

    <label>Email:</label><br/>
    <input type="email" name="email" th:value="${usuario.email}"
           th:readonly="${usuario.id} != null" required/><br/><br/>

    <label>Contrase√±a:</label><br/>
    <input type="password" name="passwordPlano" placeholder="(dejar en blanco para no cambiar)"/><br/><br/>

    <label>Activo:</label>
    <input type="checkbox" name="activo" th:checked="${usuario.activo}" /><br/><br/>

    <fieldset>
        <legend>Roles</legend>
        <div th:each="rol : ${rolesDisponibles}">
            <label>
                <input type="checkbox"
                       name="rolesSeleccionados"
                       th:value="${rol.id}"
                       th:checked="${usuario.roles != null and usuario.roles.contains(rol)}" />
                <span th:text="${rol.nombre}"></span>
            </label>
            <br/>
        </div>
    </fieldset>

    <br/>
    <button type="submit">Guardar</button>
    <a th:href="@{/usuarios}">Cancelar</a>

</form>

</body>
</html>